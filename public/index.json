[{"categories":["故障排查"],"content":"摘要： 本文记录了Windows服务器因意外断电导致MongoDB服务无法启动的解决方案。主要处理了两个错误：1053错误（通过删除并重建MongoDB服务解决）和1067错误（通过修复受损数据文件解决）。重点介绍了使用repair命令修复数据的方法，该过程可能耗时较长（千万级数据需近一天）。最后强调在数据库读写过程中切勿随意断开连接，以免造成数据损坏。解决方案同样适用于Linux系统。 [toc] ","date":"2025-09-24","objectID":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/:0:0","tags":["MongoDB","故障"],"title":"MongoDB错误处理【1053】【1067】（意外断开读写中的数据库）","uri":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/"},{"categories":["故障排查"],"content":"起因 本人的MongoDB服务在windows服务器运行，且一直有读写的操作。因为服务器突然断电导致出错，再次重启服务器后无法正常运行MongoDB服务。 查阅了网上的众多资料后觉得实在很碎片化，尤其是有的文章互相抄袭，难以参考，于是记录下自己遇到的问题和解决成功的办法，如果你同样遇到了意外断开MongoDB服务（尤其是有读写操作运行的时候），那么极有可能遇到这两个错误，希望以下错误处理的方法对你有用。 （本人服务器环境是windows系统，但是本操作流程可以同样适用于linux系统，具体的命令可以查询ai） 读写操作执行过程中千万不要随便让数据库断开连接！ ","date":"2025-09-24","objectID":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/:0:1","tags":["MongoDB","故障"],"title":"MongoDB错误处理【1053】【1067】（意外断开读写中的数据库）","uri":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/"},{"categories":["故障排查"],"content":"解决问题1：无法启动MongoDB服务[1053错误] 使用命令行工具或者windows服务启动MongoDB遇到如下报错，无法启动： 这个错误的解决办法很简单：删除该服务并重新创建一个服务。 MongoDB服务相当于注册表的一条命令，并不影响本地的数据，可以随便进行删除和重新创建。 删除原有的MongoDB服务 sc.exe delete MongoDB\r创建新的MongoDB服务 这个方式有多种，一般分为两种创建的方式： 一种直接命令输入指定数据库的存储路径 dbpath（可以有本地数据，不会影响） 和日志的路径logpath； 另一种则是使用config文件（位于MongoDB安装目录的bin目录下的mongod.cfg文件，一般位于C:\\Program Files\\MongoDB\\Server\\5.0\\bin\u003e），在config文件里面写入配置如数据库存储路径和日志，以及是否开启安全验证等，这样就可以避免多次直接在命令行中输入路径。 为了方便使用，这里我们编辑一个简单的cfg文件（也可以编辑原本的mongod.cfg），在其中写入路径配置 ##数据文件 dbpath=E:\\MongoDB\\data ##日志文件 logpath=E:\\MongoDB\\log\\mongo.log\r然后在当前的bin目录下运行以下命令，表示按照config创建一个MongoDB服务。 mongod.exe --config \"C:\\Program Files\\MongoDB\\Server\\5.0\\bin\\mongod.cfg\" --install --serviceName \"MongoDB\" --serviceDisplayName \"MongoDB\"\r创建成功是没有返回结果的，此时可以通过任务管理器-服务-打开服务-MongoDB）看到在启动的状态。 其实就是创建了一个新的命令，如果你的本地数据没有重要的数据，可以直接创建新的服务时候指定一个新的dbpath，这样基本上不会遇到后面1063错误了。 尝试启动MongoDB 这里可以可以尝试启动一下，如果直接可以启动说明数据库没有数据文件损坏。如果没有什么数据文件，推荐可以直接在新的文件夹下存储数据，也就是将dbpath路径置为新的文件夹。 net start MongoDB\r","date":"2025-09-24","objectID":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/:0:2","tags":["MongoDB","故障"],"title":"MongoDB错误处理【1053】【1067】（意外断开读写中的数据库）","uri":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/"},{"categories":["故障排查"],"content":"解决问题2： 进程意外错误[1067错误] 这个问题有多个原因，网上的处理方式一般是不针对数据受损的情况的，如果数据不受损，那么可以直接将dbpath路径下的mongod.lock文件删除（锁文件，不影响实际数据），然后再次使用net start命令启动。 如果还是不行那么考虑数据受损的情况，那就使用repair命令修复。 使用repair命令，扫描所有的本地数据修复（耗时长） （使用前删除lock文件） 该命令是MongoDB专门应对数据文件受损的一种修复机制，原理是删除所有搜索的索引和数据文档。所以最好在运行该命令前对数据文件进行备份！ 直接在MongoDB的bin目录下运行以下命令： mongod.exe --dbpath E:\\MongoDB\\data --repair\r该命令会对dbpath中的所有的数据文件进行扫描、检查、索引的重构。如果数据量大的话（尤其是索引很多需要重新构建），时间耗费也会很久。参考本人千万级别的数据文档，运行了近一天一夜才结束。 在结束后会详细报告修复的集合。 最后运行执行启动MongoDB，这次一般都可以顺利进行执行。 net start MongoDB\r最后一定不要随便给正在读写的MongoDB数据库意外断开！！ ","date":"2025-09-24","objectID":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/:0:3","tags":["MongoDB","故障"],"title":"MongoDB错误处理【1053】【1067】（意外断开读写中的数据库）","uri":"/posts/mongodb%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/"},{"categories":["技术记录"],"content":"在创建这个博客的时候遇到了一些问题，随手进行一次记录。配合第一篇博客使用基本可以顺利完成搭建个人博客方便进行使用。 ","date":"2025-09-23","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/:0:0","tags":["Hugo","博客"],"title":"创建lenBlog容易出现的小问题解决合集","uri":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/"},{"categories":["技术记录"],"content":"添加低成本图床（不要用gitee！） 鉴于笔记都是使用markdown完成的，而md文档中的图片都是与文件分离的。默认情况下，文章中插入的图片都被存储于本地的C盘中的Typora的数据文件夹中，如果是本地使用的话也可以更改图片的存储路径为某个其他的文件夹（比如笔记文件夹中的img文件夹）。 然而当我们想要在网页中展示的时候，我们本地的图片是没办法被正常访问的，所以我们需要让图片变成可以被外部应用访问的外链格式。 外链：外链（External Link），又称外部链接或导入链接（Inbound Link），是指从一个网站指向另一个网站的超链接。换句话说，外链是其他网站链接到你网站的链接，是网站之间互相引用的方式之一。 比如下面这个链接，你复制到浏览器就可以成功地看到对应的图片。为了更加方便地被其他人访问到自己的图片，我们实际上需要一个可以存储图片且可被外网访问的平台，也就是图床。 https://www.bing.com/images/search?view=detailV2\u0026ccid=80HkMbP%2f\u0026id=92F7BBD95FA963932859D828DBF03AC2A8913BBE\u0026thid=OIP.80HkMbP_8cPqwsiCGP37vQHaIp\u0026mediaurl=https%3a%2f%2fwww.lixueduan.com%2fimg%2fblog%2fgiscus%2fgiscus-config-json.png\u0026exph=1223\u0026expw=1047\u0026q=hugo%e4%bd%bf%e7%94%a8giscus%e9%83%a8%e5%88%86%e6%96%87%e7%ab%a0%e4%b8%8d%e7%94%9f%e6%95%88\u0026FORM=IRPRST\u0026ck=238D687F1EF742966A9398FD392B52EE\u0026selectedIndex=0\u0026itb=0 当然，你可以直接花钱去购买知名平台的图床服务，但是今天我们只要更低成本且方便地完成图床的功能。本人也是调研了很多的网页，发现目前最流行的一种低成本图床是使用Gitee作为图片托管平台，将其生成的外链通过PicGo的插件可以放置在Typora的markdown笔记当中。直到2025.9.20依旧有博客推荐这么去做。 但是，在我按照网上的教程进行操作时候，却在PicGo的插件文档发现了这个提示**：Gitee是不允许将仓库作为个人图床的。** 图片中对应的issues链接，有些人发现自己的gitee仓库被官方封禁了 插件失效 · Issue #11 · zhanghuid/picgo-plugin-gitee 有人反映自己用于存储图片的gitee仓库被官方封禁了，原因是该仓库中包含了大量的外链访问行为。而恰好人本在之前搭建博客时候也看到了一些文章无法正常显示图片的情况(仅有一个gitee的链接)。后来本人搜索到了官方对于仓库的协议中的确提到禁止个人仓库有大量外链请求。 不过想来也是，这样白嫖码云的行为很容易被官方察觉，且码云也不像github有微软这样的大公司作为靠山，自然是严令禁止了。而刚刚的issues链接中也有人反映github貌似也开始逐渐有封禁大量外链请求的行为。 所以为了避免自己的辛辛苦苦整理的图片被封禁可能有丢失的风险，强烈建议不再追求完美的免费图床计划（使用代码托管平台作为自己的图床），而是使用低成本的OSS进行图片的存储。 使用Typora + PicGo + 阿里云OSS 搭建图床 费用:money_with_wings: : 9 元 40GB / 年 图片需要存储在阿里云的OSS对象存储服务中，在Typora记笔记的时候，我们通过Typora的插件PicGo插件可以配置好图片上传的功能。当我们在md文档中复制一个图片时候，就会自动上传到阿里云的OSS中，且图片变为外链的形式可以被访问。 具体的操作流程推荐官方教程：手把手教你搭建阿里云图床(PicGo+Typora+阿里云OSS)，新手小白一看就会-阿里云开发者社区 ","date":"2025-09-23","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/:0:1","tags":["Hugo","博客"],"title":"创建lenBlog容易出现的小问题解决合集","uri":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/"},{"categories":["技术记录"],"content":"仅设置giscus评论不生效 giscus是github上的一个插件，实际上是利用了github仓库的discussion功能，当我们在文章下面进行评论的时候，实际上也是在github的源代码仓库中进行评论。 所以想要使用该插件的评论功能必须要配置两个地方： github源代码仓库的discussion功能的开启 giscus插件的设置 最后在我们的Hugo对应的配置文件hugo.toml文件中完成即可。具体操作细致的操作流程可以参考这个文章：(1 封私信 / 10 条消息) Hugo 的 LoveIt 主题添加 Giscus 评论 - 知乎 ","date":"2025-09-23","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/:0:2","tags":["Hugo","博客"],"title":"创建lenBlog容易出现的小问题解决合集","uri":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/"},{"categories":["技术记录"],"content":"在使用git向github推送笔记时有时失败 这种问题一般是因为代理没有设置好，特别是本机开启了梯子，但是git工具没有设置相关的代理，导致git其实并没有走代理，一般输入以下命令设置代理即可 git config --global http.proxy git config --global https.proxy # 也可以向上面一样，提前运行以下查看是否有别的代理 git config --global http.proxy 127.0.0.1:7890 git config --global https.proxy 127.0.0.1:7890\r最后的7890看你代理走的是哪个端口，clash的话默认就是7890 ","date":"2025-09-23","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/:0:3","tags":["Hugo","博客"],"title":"创建lenBlog容易出现的小问题解决合集","uri":"/posts/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/"},{"categories":["技术记录"],"content":" 很久以前本人其实搭建过一个博客，服务器域名等等应有尽有，但是无奈写个笔记还得很很繁琐地进行更新，而且服务器次年续费真的好贵！所以现在搭建的新的博客不需要任何的服务器，而且写完笔记更新到网站也不需要自己操作，直接一键更新！ 本站点使用Hugo + 阿里云OSS对象服务 + Github Action 实现自动构建静态网页和更新。 ","date":"2025-09-23","objectID":"/posts/first_post/:0:0","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"},{"categories":["技术记录"],"content":"搭建博客 本教程不需要任何的服务器和复杂代码撰写，完成后也可以拥有很快的访问速度。当你的博客保证更新到一定的频率和文章质量时候，也可以被百度收录。 12312 你将获得的效果 当你完成一个markdown笔记的时候，你可以将其置于Hugo项目的某个文件夹下，然后右键打开终端，运行某个命令，稍等几秒之后你的笔记就将可以通过输入网址访问到（速度很快哦）。 这里甚至可以使用windows11自带的定时执行功能执行一个git脚本，每天到点自动帮你推送更新。 ","date":"2025-09-23","objectID":"/posts/first_post/:0:1","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"},{"categories":["技术记录"],"content":"搭建步骤 ","date":"2025-09-23","objectID":"/posts/first_post/:0:2","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"},{"categories":["技术记录"],"content":"前置准备 可选功能 图床 可选功能 评论 在 Windows 上安装 Hugo 来搭建博客，步骤清晰。虽然你提供的 Hugo 官方安装页面是权威参考，下面我为你整合了更具体的安装流程和后续操作步骤，并用一个表格来汇总关键信息，方便你快速把握全局。 组件名称 是否必需 主要作用 备注 Hugo 二进制文件 是 静态网站生成器的核心程序 建议下载 扩展版（extended） 以支持更多主题功能 Git 强烈推荐 用于下载和管理主题 许多主题通过 Git 仓库分发 Go 语言 仅源码安装需要 如果你选择从源码编译 Hugo 才需要 大多数用户直接使用预编译二进制文件，无需安装 Go ","date":"2025-09-23","objectID":"/posts/first_post/:0:3","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"},{"categories":["技术记录"],"content":"🧰 安装前的准备：获取必要工具 安装 Git：前往 Git 官网 下载 Windows 版本的安装程序，并按照提示完成安装。安装后，你可以在命令行中使用 git 命令，这对于后续拉取主题非常方便。 ","date":"2025-09-23","objectID":"/posts/first_post/:0:4","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"},{"categories":["技术记录"],"content":"📥 安装 Hugo 核心程序 对于大多数用户，最推荐的方法是直接使用预编译的二进制文件，过程非常简单： 下载 Hugo：访问 Hugo 在 GitHub 上的 发布页面。寻找名称中包含 hugo_extended 以及 windows-amd64 的最新版本压缩包（例如 hugo_extended_0.128.2_windows-amd64.zip）并下载。 解压文件：将下载的 ZIP 文件解压到一个你打算长期存放的目录，例如 C:\\hugo\\bin 或 D:\\hugo\\bin。解压后，你通常会得到一个 hugo.exe 可执行文件。 配置环境变量：这是关键一步，为了让系统在任何路径下都能识别 hugo 命令。 在 Windows 搜索栏输入“环境变量”，选择“编辑系统环境变量”。 在弹出的系统属性窗口中，点击“环境变量…”按钮。 在“系统变量”区域，找到并选中名为 Path 的变量，然后点击“编辑…”。 点击“新建”，将你刚才存放 hugo.exe 的目录路径（例如 C:\\hugo\\bin）添加进去。 依次点击“确定”关闭所有窗口。 验证安装：打开一个新的命令提示符（CMD）或 PowerShell 窗口，输入以下命令并回车： hugo version\r如果安装成功，屏幕上会显示 Hugo 的版本信息，例如 Hugo Static Site Generator v0.128.2。 ","date":"2025-09-23","objectID":"/posts/first_post/:0:5","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"},{"categories":["技术记录"],"content":"🚀 快速启动你的第一个博客站点 安装好 Hugo 后，你可以快速在本地创建和预览一个博客网站。 创建站点：在命令行中，导航到你希望创建博客项目的目录，然后运行以下命令（myblog 可以替换为你喜欢的任何文件夹名）： hugo new site myblog\r这会在当前目录下生成一个名为 myblog 的文件夹，里面包含了 Hugo 站点的基本结构。 添加主题：Hugo 的强大之处在于有丰富的主题可选。以添加一个名为 ananke 的流行主题为例： 进入你的站点目录： cd myblog\r使用 Git 将主题克隆到项目的 themes 目录下： git clone https://github.com/budparr/gohugo-theme-ananke.git themes/ananke\r编辑站点根目录下的配置文件 config.toml（或 hugo.toml），添加一行来指定主题： theme = \"ananke\"\r创建内容与预览： 使用命令创建你的第一篇文章： hugo new posts/my-first-post.md\r文章文件（Markdown 格式）会生成在 content/posts/ 目录下。用文本编辑器打开它，你会看到文件顶部有类似这样的前置元数据（Front Matter）： markdown --- title: \"My First Post\" date: 2025-09-23T15:30:00+08:00 draft: true --- 将 draft: true 改为 draft: false 表示这不是草稿，然后可以在 --- 下方用 Markdown 语法撰写正文。 在站点根目录下启动本地服务器： hugo server -D\r（-D 参数表示包含标记为草稿的文章）。 命令行中会输出一个本地访问地址（通常是 http://localhost:1313），在浏览器中打开它，你就能看到你的博客站点了！ ","date":"2025-09-23","objectID":"/posts/first_post/:0:6","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"},{"categories":["技术记录"],"content":"⚠️ 常见问题与小贴士 命令未找到：如果在输入 hugo version 时提示“无法识别”，请检查环境变量是否设置正确，并确保已经重新启动了命令行窗口。 主题不显示：请确保在 config.toml 文件中正确指定了主题名称，且主题已成功下载到 themes 目录下对应的文件夹中。 使用包管理器（可选）：如果你熟悉包管理器，也可以使用 Chocolatey (choco install hugo -confirm) 或 Scoop (scoop install hugo) 来安装 Hugo，这可能更方便后续更新。 完成本地搭建后，下一步就是考虑如何将它部署到互联网上，让所有人都能访问。常见的免费平台有 GitHub Pages、GitLab Pages、Vercel 等。 希望这份详细的指南能帮助你顺利在 Windows 上安装 Hugo 并迈出建站的第一步！如果你在安装过程中遇到任何具体问题，随时可以再问我。 ","date":"2025-09-23","objectID":"/posts/first_post/:0:7","tags":["Hugo","博客","教程"],"title":"利用Hugo搭建个人博客【极低成本+省运维】","uri":"/posts/first_post/"}]